// routes/auth.routes.js

const { Router } = require('express');
const router = new Router();

const routeGuard = require('../configs/route-guard.config');
const upload = require("../configs/cloudinary");

const {
  getSignUpView,
  postSignUpView,
  getLoginView,
  postLoginView,
  logOut,
  getProfile
} = require("../controllers/auth");

////////////////////////////////////////////////////////////////////////
///////////////////////////// SIGNUP //////////////////////////////////
////////////////////////////////////////////////////////////////////////

// .get() route ==> to display the signup form to users
router.get('/signup', getSignUpView);

// .post() route ==> to process form data
router.post('/signup', upload.single("profilePicture"), postSignUpView);

////////////////////////////////////////////////////////////////////////
///////////////////////////// LOGIN ////////////////////////////////////
////////////////////////////////////////////////////////////////////////

// .get() route ==> to display the login form to users
router.get('/login', getLoginView);

// .post() login route ==> to process form data
router.post('/login', postLoginView);

////////////////////////////////////////////////////////////////////////
///////////////////////////// LOGOUT ////////////////////////////////////
////////////////////////////////////////////////////////////////////////

router.post('/logout', logOut);

router.get('/userProfile', routeGuard, getProfile);

module.exports = router;
